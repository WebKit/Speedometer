!function(){"use strict";var e,t,n,o,l,i,r,s={},_=[],u=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function c(e,t){for(var n in t)e[n]=t[n];return e}function d(e){var t=e.parentNode;t&&t.removeChild(e)}function a(t,n,o){var l,i,r,s={};for(r in n)"key"==r?l=n[r]:"ref"==r?i=n[r]:s[r]=n[r];if(arguments.length>2&&(s.children=arguments.length>3?e.call(arguments,2):o),"function"==typeof t&&null!=t.defaultProps)for(r in t.defaultProps)void 0===s[r]&&(s[r]=t.defaultProps[r]);return h(t,s,l,i,null)}function h(e,o,l,i,r){var s={type:e,props:o,key:l,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==r?++n:r};return null==r&&null!=t.vnode&&t.vnode(s),s}function p(e){return e.children}function f(e,t){this.props=e,this.context=t}function v(e,t){if(null==t)return e.__?v(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?v(e):null}function y(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return y(e)}}function g(e){(!e.__d&&(e.__d=!0)&&o.push(e)&&!m.__r++||l!==t.debounceRendering)&&((l=t.debounceRendering)||i)(m)}function m(){var e,t,n,l,i,s,_,u;for(o.sort(r);e=o.shift();)e.__d&&(t=o.length,l=void 0,i=void 0,_=(s=(n=e).__v).__e,(u=n.__P)&&(l=[],(i=c({},s)).__v=s.__v+1,E(u,s,i,n.__n,void 0!==u.ownerSVGElement,null!=s.__h?[_]:null,l,null==_?v(s):_,s.__h),P(l,s),s.__e!=_&&y(s)),o.length>t&&o.sort(r));m.__r=0}function b(e,t,n,o,l,i,r,u,c,d){var a,f,y,g,m,b,x,C=o&&o.__k||_,D=C.length;for(n.__k=[],a=0;a<t.length;a++)if(null!=(g=n.__k[a]=null==(g=t[a])||"boolean"==typeof g||"function"==typeof g?null:"string"==typeof g||"number"==typeof g||"bigint"==typeof g?h(null,g,null,null,g):Array.isArray(g)?h(p,{children:g},null,null,null):g.__b>0?h(g.type,g.props,g.key,g.ref?g.ref:null,g.__v):g)){if(g.__=n,g.__b=n.__b+1,null===(y=C[a])||y&&g.key==y.key&&g.type===y.type)C[a]=void 0;else for(f=0;f<D;f++){if((y=C[f])&&g.key==y.key&&g.type===y.type){C[f]=void 0;break}y=null}E(e,g,y=y||s,l,i,r,u,c,d),m=g.__e,(f=g.ref)&&y.ref!=f&&(x||(x=[]),y.ref&&x.push(y.ref,null,g),x.push(f,g.__c||m,g)),null!=m?(null==b&&(b=m),"function"==typeof g.type&&g.__k===y.__k?g.__d=c=k(g,c,e):c=S(e,g,y,C,m,c),"function"==typeof n.type&&(n.__d=c)):c&&y.__e==c&&c.parentNode!=e&&(c=v(y))}for(n.__e=b,a=D;a--;)null!=C[a]&&("function"==typeof n.type&&null!=C[a].__e&&C[a].__e==n.__d&&(n.__d=w(o).nextSibling),L(C[a],C[a]));if(x)for(a=0;a<x.length;a++)N(x[a],x[++a],x[++a])}function k(e,t,n){for(var o,l=e.__k,i=0;l&&i<l.length;i++)(o=l[i])&&(o.__=e,t="function"==typeof o.type?k(o,t,n):S(n,o,o,l,o.__e,t));return t}function S(e,t,n,o,l,i){var r,s,_;if(void 0!==t.__d)r=t.__d,t.__d=void 0;else if(null==n||l!=i||null==l.parentNode)e:if(null==i||i.parentNode!==e)e.appendChild(l),r=null;else{for(s=i,_=0;(s=s.nextSibling)&&_<o.length;_+=1)if(s==l)break e;e.insertBefore(l,i),r=i}return void 0!==r?r:l.nextSibling}function w(e){var t,n,o;if(null==e.type||"string"==typeof e.type)return e.__e;if(e.__k)for(t=e.__k.length-1;t>=0;t--)if((n=e.__k[t])&&(o=w(n)))return o;return null}function x(e,t,n){"-"===t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||u.test(t)?n:n+"px"}function C(e,t,n,o,l){var i;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof o&&(e.style.cssText=o=""),o)for(t in o)n&&t in n||x(e.style,t,"");if(n)for(t in n)o&&n[t]===o[t]||x(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])i=t!==(t=t.replace(/Capture$/,"")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=n,n?o||e.addEventListener(t,i?T:D,i):e.removeEventListener(t,i?T:D,i);else if("dangerouslySetInnerHTML"!==t){if(l)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!==t&&"height"!==t&&"href"!==t&&"list"!==t&&"form"!==t&&"tabIndex"!==t&&"download"!==t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&-1==t.indexOf("-")?e.removeAttribute(t):e.setAttribute(t,n))}}function D(e){return this.l[e.type+!1](t.event?t.event(e):e)}function T(e){return this.l[e.type+!0](t.event?t.event(e):e)}function E(e,n,o,l,i,r,s,_,u){var d,a,h,v,y,g,m,k,S,w,x,C,D,T,E,P=n.type;if(void 0!==n.constructor)return null;null!=o.__h&&(u=o.__h,_=n.__e=o.__e,n.__h=null,r=[_]),(d=t.__b)&&d(n);try{e:if("function"==typeof P){if(k=n.props,S=(d=P.contextType)&&l[d.__c],w=d?S?S.props.value:d.__:l,o.__c?m=(a=n.__c=o.__c).__=a.__E:("prototype"in P&&P.prototype.render?n.__c=a=new P(k,w):(n.__c=a=new f(k,w),a.constructor=P,a.render=U),S&&S.sub(a),a.props=k,a.state||(a.state={}),a.context=w,a.__n=l,h=a.__d=!0,a.__h=[],a._sb=[]),null==a.__s&&(a.__s=a.state),null!=P.getDerivedStateFromProps&&(a.__s==a.state&&(a.__s=c({},a.__s)),c(a.__s,P.getDerivedStateFromProps(k,a.__s))),v=a.props,y=a.state,a.__v=n,h)null==P.getDerivedStateFromProps&&null!=a.componentWillMount&&a.componentWillMount(),null!=a.componentDidMount&&a.__h.push(a.componentDidMount);else{if(null==P.getDerivedStateFromProps&&k!==v&&null!=a.componentWillReceiveProps&&a.componentWillReceiveProps(k,w),!a.__e&&null!=a.shouldComponentUpdate&&!1===a.shouldComponentUpdate(k,a.__s,w)||n.__v===o.__v){for(n.__v!==o.__v&&(a.props=k,a.state=a.__s,a.__d=!1),a.__e=!1,n.__e=o.__e,n.__k=o.__k,n.__k.forEach((function(e){e&&(e.__=n)})),x=0;x<a._sb.length;x++)a.__h.push(a._sb[x]);a._sb=[],a.__h.length&&s.push(a);break e}null!=a.componentWillUpdate&&a.componentWillUpdate(k,a.__s,w),null!=a.componentDidUpdate&&a.__h.push((function(){a.componentDidUpdate(v,y,g)}))}if(a.context=w,a.props=k,a.__P=e,C=t.__r,D=0,"prototype"in P&&P.prototype.render){for(a.state=a.__s,a.__d=!1,C&&C(n),d=a.render(a.props,a.state,a.context),T=0;T<a._sb.length;T++)a.__h.push(a._sb[T]);a._sb=[]}else do{a.__d=!1,C&&C(n),d=a.render(a.props,a.state,a.context),a.state=a.__s}while(a.__d&&++D<25);a.state=a.__s,null!=a.getChildContext&&(l=c(c({},l),a.getChildContext())),h||null==a.getSnapshotBeforeUpdate||(g=a.getSnapshotBeforeUpdate(v,y)),E=null!=d&&d.type===p&&null==d.key?d.props.children:d,b(e,Array.isArray(E)?E:[E],n,o,l,i,r,s,_,u),a.base=n.__e,n.__h=null,a.__h.length&&s.push(a),m&&(a.__E=a.__=null),a.__e=!1}else null==r&&n.__v===o.__v?(n.__k=o.__k,n.__e=o.__e):n.__e=A(o.__e,n,o,l,i,r,s,u);(d=t.diffed)&&d(n)}catch(e){n.__v=null,(u||null!=r)&&(n.__e=_,n.__h=!!u,r[r.indexOf(_)]=null),t.__e(e,n,o)}}function P(e,n){t.__c&&t.__c(n,e),e.some((function(n){try{e=n.__h,n.__h=[],e.some((function(e){e.call(n)}))}catch(e){t.__e(e,n.__v)}}))}function A(t,n,o,l,i,r,_,u){var c,a,h,p=o.props,f=n.props,y=n.type,g=0;if("svg"===y&&(i=!0),null!=r)for(;g<r.length;g++)if((c=r[g])&&"setAttribute"in c==!!y&&(y?c.localName===y:3===c.nodeType)){t=c,r[g]=null;break}if(null==t){if(null===y)return document.createTextNode(f);t=i?document.createElementNS("http://www.w3.org/2000/svg",y):document.createElement(y,f.is&&f),r=null,u=!1}if(null===y)p===f||u&&t.data===f||(t.data=f);else{if(r=r&&e.call(t.childNodes),a=(p=o.props||s).dangerouslySetInnerHTML,h=f.dangerouslySetInnerHTML,!u){if(null!=r)for(p={},g=0;g<t.attributes.length;g++)p[t.attributes[g].name]=t.attributes[g].value;(h||a)&&(h&&(a&&h.__html==a.__html||h.__html===t.innerHTML)||(t.innerHTML=h&&h.__html||""))}if(function(e,t,n,o,l){var i;for(i in n)"children"===i||"key"===i||i in t||C(e,i,null,n[i],o);for(i in t)l&&"function"!=typeof t[i]||"children"===i||"key"===i||"value"===i||"checked"===i||n[i]===t[i]||C(e,i,t[i],n[i],o)}(t,f,p,i,u),h)n.__k=[];else if(g=n.props.children,b(t,Array.isArray(g)?g:[g],n,o,l,i&&"foreignObject"!==y,r,_,r?r[0]:o.__k&&v(o,0),u),null!=r)for(g=r.length;g--;)null!=r[g]&&d(r[g]);u||("value"in f&&void 0!==(g=f.value)&&(g!==t.value||"progress"===y&&!g||"option"===y&&g!==p.value)&&C(t,"value",g,p.value,!1),"checked"in f&&void 0!==(g=f.checked)&&g!==t.checked&&C(t,"checked",g,p.checked,!1))}return t}function N(e,n,o){try{"function"==typeof e?e(n):e.current=n}catch(e){t.__e(e,o)}}function L(e,n,o){var l,i;if(t.unmount&&t.unmount(e),(l=e.ref)&&(l.current&&l.current!==e.__e||N(l,null,n)),null!=(l=e.__c)){if(l.componentWillUnmount)try{l.componentWillUnmount()}catch(e){t.__e(e,n)}l.base=l.__P=null,e.__c=void 0}if(l=e.__k)for(i=0;i<l.length;i++)l[i]&&L(l[i],n,o||"function"!=typeof e.type);o||null==e.__e||d(e.__e),e.__=e.__e=e.__d=void 0}function U(e,t,n){return this.constructor(e,n)}function M(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e=_.slice,t={__e:function(e,t,n,o){for(var l,i,r;t=t.__;)if((l=t.__c)&&!l.__)try{if((i=l.constructor)&&null!=i.getDerivedStateFromError&&(l.setState(i.getDerivedStateFromError(e)),r=l.__d),null!=l.componentDidCatch&&(l.componentDidCatch(e,o||{}),r=l.__d),r)return l.__E=l}catch(t){e=t}throw e}},n=0,f.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=c({},this.state),"function"==typeof e&&(e=e(c({},n),this.props)),e&&c(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),g(this))},f.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),g(this))},f.prototype.render=p,o=[],i="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,r=function(e,t){return e.__v.__b-t.__v.__b},m.__r=0;var O,W=(function(e,t){e.exports=function(e,t,n,o,l){for(t=t.split?t.split("."):t,o=0;o<t.length;o++)e=e?e[t[o]]:l;return e===l?n:e}}(O={path:void 0,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}}),O.exports);function j(e,t,n){var o=t.split("."),l=e.__lsc||(e.__lsc={});return l[t+n]||(l[t+n]=function(t){for(var l=t&&t.target||this,i={},r=i,s="string"==typeof n?W(t,n):l&&l.nodeName?l.type.match(/^che|rad/)?l.checked:l.value:t,_=0;_<o.length-1;_++)r=r[o[_]]||(r[o[_]]=!_&&e.state[o[_]]||{});r[o[_]]=s,e.setState(i)})}function F(){let e="";for(let t=0;t<32;t++){let n=16*Math.random()|0;8!==t&&12!==t&&16!==t&&20!==t||(e+="-"),e+=(12===t?4:16===t?3&n|8:n).toString(16)}return e}class R{constructor(e,t){this.key=e,this.todos=[]||[],this.onChanges=[t]}inform(){this.key,this.todos,this.onChanges.forEach((e=>e()))}addTodo(e){this.todos=this.todos.concat({id:F(),title:e,completed:!1}),this.inform()}toggleAll(e){this.todos=this.todos.map((t=>({...t,completed:e}))),this.inform()}toggle(e){this.todos=this.todos.map((t=>t!==e?t:{...t,completed:!t.completed})),this.inform()}destroy(e){this.todos=this.todos.filter((t=>t!==e)),this.inform()}save(e,t){this.todos=this.todos.map((n=>n!==e?n:{...n,title:t})),this.inform()}clearCompleted(){this.todos=this.todos.filter((e=>!e.completed)),this.inform()}}var H,I={},K={get exports(){return I},set exports(e){I=e}};
/*!
  	Copyright (c) 2018 Jed Watson.
  	Licensed under the MIT License (MIT), see
  	http://jedwatson.github.io/classnames
  */
H=K,function(){var e={}.hasOwnProperty;function t(){for(var n=[],o=0;o<arguments.length;o++){var l=arguments[o];if(l){var i=typeof l;if("string"===i||"number"===i)n.push(l);else if(Array.isArray(l)){if(l.length){var r=t.apply(null,l);r&&n.push(r)}}else if("object"===i){if(l.toString!==Object.prototype.toString&&!l.toString.toString().includes("[native code]")){n.push(l.toString());continue}for(var s in l)e.call(l,s)&&l[s]&&n.push(s)}}}return n.join(" ")}H.exports?(t.default=t,H.exports=t):window.classNames=t}();class q extends f{render(e){let{nowShowing:t,count:n,completedCount:o,onClearCompleted:l}=e;return a("footer",{class:"footer"},a("span",{class:"todo-count"},a("strong",null,n)," ",function(e,t){return 1===e?t:t+"s"}(n,"item")," left"),a("ul",{class:"filters"},a("li",null,a("a",{href:"#/",class:I({selected:"all"==t})},"All"))," ",a("li",null,a("a",{href:"#/active",class:I({selected:"active"==t})},"Active"))," ",a("li",null,a("a",{href:"#/completed",class:I({selected:"completed"==t})},"Completed"))),o>0&&a("button",{class:"clear-completed",onClick:l},"Clear completed"))}}class B extends f{constructor(){super(...arguments),M(this,"handleSubmit",(()=>{let{onSave:e,onDestroy:t,todo:n}=this.props,o=this.state.editText.trim();o?(e(n,o),this.setState({editText:o})):t(n)})),M(this,"handleEdit",(()=>{let{onEdit:e,todo:t}=this.props;e(t),this.setState({editText:t.title})})),M(this,"toggle",(e=>{let{onToggle:t,todo:n}=this.props;t(n),e.preventDefault()})),M(this,"handleKeyDown",(e=>{if(27===e.which){let{todo:e}=this.props;this.setState({editText:e.title}),this.props.onCancel(e)}else 13===e.which&&this.handleSubmit()})),M(this,"handleDestroy",(()=>{this.props.onDestroy(this.props.todo)}))}componentDidUpdate(){let e=this.base&&this.base.querySelector(".edit");e&&e.focus()}render(e,t){let{todo:{title:n,completed:o},onToggle:l,onDestroy:i,editing:r}=e,{editText:s}=t;return a("li",{class:I({completed:o,editing:r})},a("div",{class:"view"},a("input",{class:"toggle",type:"checkbox",checked:o,onChange:this.toggle}),a("label",{onDblClick:this.handleEdit},n),a("button",{class:"destroy",onClick:this.handleDestroy})),r&&a("input",{class:"edit",value:s,onBlur:this.handleSubmit,onInput:this.linkState("editText"),onKeyDown:this.handleKeyDown}))}}const $={all:e=>!0,active:e=>!e.completed,completed:e=>e.completed};!function(n,o,l){var i,r,_;t.__&&t.__(n,o),r=(i="function"==typeof l)?null:l&&l.__k||o.__k,_=[],E(o,n=(!i&&l||o).__k=a(p,null,[n]),r||s,s,void 0!==o.ownerSVGElement,!i&&l?[l]:r?null:o.firstChild?e.call(o.childNodes):null,_,!i&&l?l:r?r.__e:o.firstChild,i),P(_,n)}(a(class extends f{constructor(){super(),M(this,"handleNewTodoKeyDown",(e=>{if(13!==e.keyCode)return;e.preventDefault();let t=e.target.value.trim();t&&(this.model.addTodo(t),this.setState({newTodo:""}))})),M(this,"toggleAll",(e=>{let t=e.target.checked;this.model.toggleAll(t)})),M(this,"toggle",(e=>{this.model.toggle(e)})),M(this,"destroy",(e=>{this.model.destroy(e)})),M(this,"edit",(e=>{this.setState({editing:e.id})})),M(this,"save",((e,t)=>{this.model.save(e,t),this.setState({editing:null})})),M(this,"cancel",(()=>{this.setState({editing:null})})),M(this,"clearCompleted",(()=>{this.model.clearCompleted()})),this.model=new R("preact-todos",(()=>this.setState({}))),addEventListener("hashchange",this.handleRoute.bind(this)),this.handleRoute()}handleRoute(){let e=String(location.hash||"").split("/").pop();$[e]||(e="all"),this.setState({nowShowing:e})}render(e,t){let{nowShowing:n=ALL_TODOS,newTodo:o,editing:l}=t,{todos:i}=this.model,r=i.filter($[n]),s=i.reduce(((e,t)=>e+(t.completed?0:1)),0),_=i.length-s;return a("div",null,a("header",{class:"header"},a("h1",null,"todos"),a("input",{class:"new-todo",placeholder:"What needs to be done?",value:o,onKeyDown:this.handleNewTodoKeyDown,onInput:j(this,"newTodo"),autoFocus:!0})),i.length?a("section",{class:"main"},a("input",{class:"toggle-all",type:"checkbox",onChange:this.toggleAll,checked:0===s}),a("ul",{class:"todo-list"},r.map((e=>a(B,{todo:e,onToggle:this.toggle,onDestroy:this.destroy,onEdit:this.edit,editing:l===e.id,onSave:this.save,onCancel:this.cancel}))))):null,s||_?a(q,{count:s,completedCount:_,nowShowing:n,onClearCompleted:this.clearCompleted}):null)}},null),document.querySelector(".todoapp"))}();
//# sourceMappingURL=app.js.map
